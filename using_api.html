<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Using API &mdash; PDC 0.3.rc-2.51.gc0155cb documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3.rc-2.51.gc0155cb',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PDC 0.3.rc-2.51.gc0155cb documentation" href="index.html" />
    <link rel="next" title="2. Bulk operations" href="bulk_operations.html" />
    <link rel="prev" title="Welcome to PDC’s documentation!" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="bulk_operations.html" title="2. Bulk operations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to PDC’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PDC 0.3.rc-2.51.gc0155cb documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="using-api">
<span id="id1"></span><h1>1. Using API<a class="headerlink" href="#using-api" title="Permalink to this headline">¶</a></h1>
<p>This page contains details about using PDC from the API user view-point.</p>
<div class="section" id="authentication">
<h2>1.1. Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>By default, all the API calls require authentication. While the web UI is
authenticated using an external system such as Kerberos or SAML2, the API uses
a custom authentication for performance reasons.</p>
<p>The expected workflow is as follows:</p>
<ol class="arabic simple">
<li>Obtain an authorization token from the API <code class="docutils literal"><span class="pre">/rest_api/v1/token/obtain/</span></code>.
This is one of end-points that actually use the same authentication system
as the web UI.</li>
<li>Perform requested actions using the token. It needs to be sent with the
request in an HTTP header <code class="docutils literal"><span class="pre">Authorization</span></code>. With <code class="docutils literal"><span class="pre">curl</span></code>, this can be done
with the <code class="docutils literal"><span class="pre">-H</span></code> flag (for example <code class="docutils literal"><span class="pre">-H</span> <span class="pre">&quot;Authorization:</span> <span class="pre">Token</span> <span class="pre">XXX&quot;</span></code>).</li>
</ol>
<p>The token you receive from the API is tied to your user account. Currently, the
token is valid indefinitely. However, if you leak it somewhere, you can
manually request a new token, which will invalidate the old one. To do this,
use the <code class="docutils literal"><span class="pre">/rest_api/v1/token/refresh/</span></code> API.</p>
<p>If you access the API through one of PDC client, the authentication can be
handled transparently for you.</p>
</div>
<div class="section" id="paging">
<h2>1.2. Paging<a class="headerlink" href="#paging" title="Permalink to this headline">¶</a></h2>
<p>The lists returned from the API can be quite long. They are paginated by
default with pages containing 20 items.</p>
<p>The structure of paginated reply is JSON object with following keys:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">count</span></code></dt>
<dd>Total number of items. Essentially, this tells you how many items you would
get if you got all the pages and concatenated them.</dd>
<dt><code class="docutils literal"><span class="pre">next</span></code></dt>
<dd>URL where you can get the next page. Contains <code class="docutils literal"><span class="pre">null</span></code> on the last page.</dd>
<dt><code class="docutils literal"><span class="pre">previous</span></code></dt>
<dd>URL where the previous page is. On the first page it contains <code class="docutils literal"><span class="pre">null</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">results</span></code></dt>
<dd>The actual data as a JSON array.</dd>
</dl>
<p>You can control the details of the paginating by a couple query parameters. The
<code class="docutils literal"><span class="pre">page</span></code> parameter specifies which page you want. With <code class="docutils literal"><span class="pre">page_size</span></code> you can
set up different size of a page. The maximum allowed number of results per page
is 100. Specifying anything higher has the same result as specifying 100. There
is a special value of <code class="docutils literal"><span class="pre">-1</span></code> for the page size, which would turn pagination off
and give all the results at once. In this case, the response is just the result
array without any count or URLS.</p>
<p>Please be careful when turning the pagination off. If your query could return
hundreds or thousands of results, consider getting the data page by page
instead.</p>
</div>
<div class="section" id="change-monitoring">
<h2>1.3. Change monitoring<a class="headerlink" href="#change-monitoring" title="Permalink to this headline">¶</a></h2>
<p>Whenever a change is performed through the API, a log is created so that it is
possible to find out what, when, why and by who was changed.</p>
<p>The changes can be viewed from the API under the <code class="docutils literal"><span class="pre">/rest_api/v1/changesets/</span></code>
end-point. There is also a view on the web pages. A logged-in user can access
it from the menu in top right corner.</p>
<p>To store the reason for the change, add HTTP header <code class="docutils literal"><span class="pre">PDC-Change-Comment</span></code>,
whose value is an arbitrary string that will be stored with the change.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Using API</a><ul>
<li><a class="reference internal" href="#authentication">1.1. Authentication</a></li>
<li><a class="reference internal" href="#paging">1.2. Paging</a></li>
<li><a class="reference internal" href="#change-monitoring">1.3. Change monitoring</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to PDC&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="bulk_operations.html"
                        title="next chapter">2. Bulk operations</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/using_api.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="bulk_operations.html" title="2. Bulk operations"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to PDC’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PDC 0.3.rc-2.51.gc0155cb documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014-2015, PDC Devel Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>